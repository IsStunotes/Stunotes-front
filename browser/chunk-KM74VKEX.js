import{a as y}from"./chunk-7BJYDXOP.js";import"./chunk-EJPFUGRK.js";import{a as v,b as u,c as C,d as _,g as k,j as S,k as x,q as F,s as M}from"./chunk-HZNXWY7S.js";import{f as h}from"./chunk-CTUQ4QRL.js";import{Lb as b,Oa as c,Pa as o,Qa as t,Ra as m,Va as l,cb as r,eb as f,pa as a,ta as s,za as p}from"./chunk-QV3KOCKX.js";import"./chunk-EQDQRRRY.js";var O=class d{constructor(n,e,i){this.fb=n;this.router=e;this.authService=i;this.loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",u.required]})}loginForm;submitting=!1;onSubmit(){if(this.loginForm.valid){let n=this.loginForm.value;this.submitting=!0,this.authService.login(n).subscribe({next:e=>{switch(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e)),e.role){case"STUDENT":this.router.navigate(["/home"]);break;case"TEACHER":this.router.navigate(["/home"]);break;case"ADMIN":this.router.navigate(["/home"]);break;default:this.router.navigate(["/"])}this.submitting=!1},error:e=>{alert("Credenciales incorrectas o error en el servidor."),this.submitting=!1}})}else this.loginForm.markAllAsTouched()}goToRegister(){this.router.navigate(["/auth/select-role"])}goToForgot(){this.router.navigate(["/recover"])}static \u0275fac=function(e){return new(e||d)(s(F),s(h),s(y))};static \u0275cmp=p({type:d,selectors:[["app-auth"]],decls:22,vars:3,consts:[[1,"auth-container"],[1,"auth-box","animate-slide-up"],[1,"auth-title"],[1,"subtitle"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","email","formControlName","email"],["type","password","formControlName","password"],["type","submit",3,"disabled"],[1,"forgot-link",3,"click"],[1,"divider"],[1,"register-btn",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"StuNotes"),t(),o(4,"p",3),r(5,"Conecta con tu comunidad educativa"),t(),o(6,"form",4),l("ngSubmit",function(){return i.onSubmit()}),o(7,"div",5)(8,"label"),r(9,"Correo electr\xF3nico"),t(),m(10,"input",6),t(),o(11,"div",5)(12,"label"),r(13,"Contrase\xF1a"),t(),m(14,"input",7),t(),o(15,"button",8),r(16),t()(),o(17,"a",9),l("click",function(){return i.goToForgot()}),r(18,"\xBFOlvidaste tu contrase\xF1a?"),t(),m(19,"div",10),o(20,"button",11),l("click",function(){return i.goToRegister()}),r(21,"Crear cuenta nueva"),t()()()),e&2&&(a(6),c("formGroup",i.loginForm),a(9),c("disabled",i.submitting),a(),f(" ",i.submitting?"Ingresando...":"Iniciar Sesi\xF3n"," "))},dependencies:[b,M,k,v,C,_,S,x],styles:["[_nghost-%COMP%]{font-family:Poppins,sans-serif;display:block;background:#fdfdfd}.auth-container[_ngcontent-%COMP%]{background:#faf5ff;min-height:100vh;display:flex;align-items:center;justify-content:center}.auth-box[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:.75rem;box-shadow:0 10px 30px #0000000d;width:100%;max-width:450px;text-align:center;opacity:0;transform:translateY(40px);animation:_ngcontent-%COMP%_slide-up .6s ease forwards}.auth-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#7c3aed;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{margin-bottom:2rem;color:#6b7280}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}label[_ngcontent-%COMP%]{display:block;margin-bottom:.75rem;font-weight:500;color:#374151}input[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;padding:.75rem;border:1px solid #e5e7eb;border-radius:.5rem;font-size:1rem;outline:none;transition:border-color .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#7c3aed;box-shadow:0 0 0 2px #f3e8ff}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#7c3aed;color:#fff;border:none;border-radius:.5rem;font-weight:600;font-size:1rem;margin-top:1rem;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#7e22ce}.forgot-link[_ngcontent-%COMP%]{display:block;margin:1rem 0;color:#6b7280;cursor:pointer;font-size:.875rem}.divider[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb;margin:1.5rem 0}.register-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:transparent;border:2px solid #7c3aed;color:#7c3aed;border-radius:.5rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.register-btn[_ngcontent-%COMP%]:hover{background-color:#f3e8ff}@keyframes _ngcontent-%COMP%_slide-up{to{opacity:1;transform:translateY(0)}}"]})};export{O as AuthComponent};
