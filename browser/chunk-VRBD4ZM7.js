import{a as H}from"./chunk-62J3XORY.js";import{a as Q}from"./chunk-Z47XEYJ7.js";import{a as G}from"./chunk-NXFSLBTQ.js";import{a as B}from"./chunk-6NPB4U6P.js";import{a as V}from"./chunk-5EFBKWPD.js";import{a as q}from"./chunk-CHSQQFRX.js";import"./chunk-EV5VSRPK.js";import{a as D,c as F,f as A,l as z,m as R,n as j,r as W,s as Y}from"./chunk-HZNXWY7S.js";import{f as I}from"./chunk-CTUQ4QRL.js";import{Da as x,Ib as S,Jb as E,Kb as T,Lb as L,Oa as g,Pa as t,Qa as r,Ra as d,U as _,Ua as u,V as f,Va as p,Wa as l,cb as s,db as M,eb as h,fb as w,gb as v,hb as b,ib as k,mb as N,nb as y,pa as c,ta as C,za as O}from"./chunk-QV3KOCKX.js";import{e as K}from"./chunk-EQDQRRRY.js";var P=K(Q());function U(i,n){if(i&1){let e=u();t(0,"select",18),k("ngModelChange",function(o){_(e);let m=l();return b(m.sortDirection,o)||(m.sortDirection=o),f(o)}),p("change",function(){_(e);let o=l();return f(o.onSortChange())}),t(1,"option",19),s(2,"Ascendente"),r(),t(3,"option",20),s(4,"Descendente"),r()()}if(i&2){let e=l();v("ngModel",e.sortDirection)}}function X(i,n){i&1&&(t(0,"div",21),d(1,"div",22),t(2,"p"),s(3,"Cargando notas..."),r()())}function Z(i,n){if(i&1){let e=u();t(0,"span",34),s(1),t(2,"button",35),p("click",function(){_(e);let o=l(3);return f(o.clearSearch())}),s(3,"\xD7"),r()()}if(i&2){let e=l(3);c(),h(' B\xFAsqueda: "',e.searchTerm,'" ')}}function $(i,n){if(i&1){let e=u();t(0,"span",34),s(1),t(2,"button",35),p("click",function(){_(e);let o=l(3);return f(o.clearCollectionFilter())}),s(3,"\xD7"),r()()}if(i&2){let e=l(3);c(),h(' Categor\xEDa: "',e.selectedCollectionName,'" ')}}function ee(i,n){if(i&1){let e=u();t(0,"span",34),s(1),t(2,"button",35),p("click",function(){_(e);let o=l(3);return f(o.clearSort())}),s(3,"\xD7"),r()()}if(i&2){let e=l(3);c(),h(" Orden: ",e.getSortText()," ")}}function te(i,n){if(i&1){let e=u();t(0,"div",30)(1,"span",31),s(2,"Filtros activos:"),r(),x(3,Z,4,1,"span",32)(4,$,4,1,"span",32)(5,ee,4,1,"span",32),t(6,"button",33),p("click",function(){_(e);let o=l(2);return f(o.clearAllFilters())}),s(7,"Limpiar todo"),r()()}if(i&2){let e=l(2);c(3),g("ngIf",e.searchTerm),c(),g("ngIf",e.selectedCollectionName),c(),g("ngIf",e.sortBy)}}function ne(i,n){if(i&1){let e=u();t(0,"div",36),d(1,"i",37),t(2,"p"),s(3,"No hay notas"),r(),t(4,"button",38),p("click",function(){_(e);let o=l(2);return f(o.createNewNote())}),d(5,"i",6),s(6," Crear primera nota "),r()()}}function ie(i,n){if(i&1){let e=u();t(0,"div",36),d(1,"i",39),t(2,"p"),s(3,"No se encontraron notas con los filtros aplicados"),r(),t(4,"button",40),p("click",function(){_(e);let o=l(2);return f(o.clearAllFilters())}),d(5,"i",41),s(6," Limpiar filtros "),r()()}}function oe(i,n){if(i&1&&(t(0,"span",55),d(1,"i",56),s(2),r()),i&2){let e=l().$implicit;c(2),h(" ",e.collection.name," ")}}function re(i,n){if(i&1){let e=u();t(0,"div",42)(1,"div",43)(2,"div",44)(3,"button",45),p("click",function(){let o=_(e).$implicit,m=l(2);return f(m.editNote(o.id))}),d(4,"i",46),r(),t(5,"button",47),p("click",function(){let o=_(e).$implicit,m=l(2);return f(m.deleteNote(o.id))}),d(6,"i",48),r()(),t(7,"h3",49),s(8),r(),t(9,"p",50),s(10),r(),t(11,"div",51),x(12,oe,3,1,"span",52),t(13,"span",53),d(14,"i",54),s(15),N(16,"date"),r()()()()}if(i&2){let e=n.$implicit;c(8),M(e.title),c(2),M(e.content||"Sin contenido"),c(2),g("ngIf",e.collection),c(3),h(" Creada: ",y(16,4,e.createdAt,"dd/MM/yyyy")," ")}}function ae(i,n){if(i&1){let e=u();t(0,"div",57)(1,"button",58),p("click",function(){_(e);let o=l(2);return f(o.goToPage(o.currentPage-1))}),d(2,"i",59),r(),t(3,"span",60),s(4),r(),t(5,"button",58),p("click",function(){_(e);let o=l(2);return f(o.goToPage(o.currentPage+1))}),d(6,"i",61),r()()}if(i&2){let e=l(2);c(),g("disabled",e.currentPage===0),c(3),w(" P\xE1gina ",e.currentPage+1," de ",e.totalPages," "),c(),g("disabled",e.currentPage===e.totalPages-1)}}function se(i,n){if(i&1&&(t(0,"div",23),x(1,te,8,3,"div",24),t(2,"div",25)(3,"h2",26),s(4," MIS NOTAS "),r(),x(5,ne,7,0,"div",27)(6,ie,7,0,"div",27)(7,re,17,7,"div",28),r(),x(8,ae,7,4,"div",29),r()),i&2){let e=l();c(),g("ngIf",e.hasActiveFilters()),c(4),g("ngIf",e.notes.length===0&&!e.hasActiveFilters()),c(),g("ngIf",e.notes.length===0&&e.hasActiveFilters()),c(),g("ngForOf",e.notes),c(),g("ngIf",e.totalPages>1)}}var J=class i{constructor(n,e,a){this.noteService=n;this.collectionService=e;this.router=a}notes=[];collections=[];loading=!1;searchTerm="";selectedCollectionName="";sortBy="";sortDirection="asc";currentPage=0;pageSize=15;totalPages=0;totalElements=0;goBack(){history.back()}ngOnInit(){this.loadCollections(()=>{this.loadNotes()})}loadCollections(n){this.collectionService.getCollections().subscribe({next:e=>{this.collections=e,n&&n()},error:e=>{console.error("Error al cargar colecciones:",e),this.showError("Error al cargar las colecciones")}})}loadNotes(){this.loading=!0;let n="";this.searchTerm&&this.searchTerm.trim()?n=this.searchTerm.trim():this.selectedCollectionName&&(n=this.selectedCollectionName),n?this.noteService.searchNotesByCollectionName(n,this.currentPage,this.pageSize,this.sortBy||void 0,this.sortDirection).subscribe({next:e=>{this.processNotesResponse(e),this.loading=!1},error:e=>{console.error("Error al cargar notas:",e),this.showError("Error al cargar las notas"),this.loading=!1}}):this.noteService.getNotes(this.currentPage,this.pageSize,void 0,void 0,this.sortBy||void 0,this.sortDirection).subscribe({next:e=>{this.processNotesResponse(e),this.loading=!1},error:e=>{console.error("Error al cargar notas:",e),this.showError("Error al cargar las notas"),this.loading=!1}})}processNotesResponse(n){this.notes=n.content,this.totalPages=n.totalPages,this.totalElements=n.totalElements}onSearch(){this.currentPage=0,this.selectedCollectionName="",this.loadNotes()}onSearchInput(){}onCollectionFilterChange(){this.currentPage=0,this.searchTerm="",this.loadNotes()}onSortChange(){this.currentPage=0,this.loadNotes()}clearSearch(){this.searchTerm="",this.currentPage=0,this.loadNotes()}clearCollectionFilter(){this.selectedCollectionName="",this.currentPage=0,this.loadNotes()}clearSort(){this.sortBy="",this.sortDirection="asc",this.currentPage=0,this.loadNotes()}clearAllFilters(){this.searchTerm="",this.selectedCollectionName="",this.sortBy="",this.sortDirection="asc",this.currentPage=0,this.loadNotes()}hasActiveFilters(){return!!(this.searchTerm||this.selectedCollectionName||this.sortBy)}getSortText(){if(!this.sortBy)return"";let n={createdAt:"Fecha de creaci\xF3n",title:"T\xEDtulo",name:"Autor"},e=this.sortDirection==="asc"?"Ascendente":"Descendente";return`${n[this.sortBy]} (${e})`}goToPage(n){n>=0&&n<this.totalPages&&(this.currentPage=n,this.loadNotes())}createNewNote(){this.router.navigate(["/notes/new"])}editNote(n){this.router.navigate(["/notes",n,"edit"])}deleteNote(n){P.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.noteService.deleteNote(n).subscribe({next:()=>{P.default.fire("Eliminado","La nota ha sido eliminada correctamente.","success"),this.loadNotes()},error:a=>{console.error("Error al eliminar la nota:",a),this.showError("Error al eliminar la nota")}})})}showError(n){P.default.fire("Error",n,"error")}static \u0275fac=function(e){return new(e||i)(C(G),C(H),C(I))};static \u0275cmp=O({type:i,selectors:[["app-note-list"]],decls:26,vars:5,consts:[[1,"task-container"],[1,"task-header"],[1,"header-left"],[1,"back-btn",3,"click"],[1,"fas","fa-arrow-left"],[1,"new-task-btn",3,"click"],[1,"fas","fa-plus"],[1,"search-filters"],[1,"search-container"],["type","text","placeholder","Buscar por nombre de categor\xEDa...",1,"search-input",3,"ngModelChange","keyup.enter","input","ngModel"],[1,"sort-container"],[1,"sort-select",3,"ngModelChange","change","ngModel"],["value",""],["value","createdAt"],["value","title"],["class","sort-direction-select",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","tasks-content",4,"ngIf"],[1,"sort-direction-select",3,"ngModelChange","change","ngModel"],["value","asc"],["value","desc"],[1,"loading-container"],[1,"loading-spinner"],[1,"tasks-content"],["class","active-filters",4,"ngIf"],[1,"tasks-section"],[1,"section-title"],["class","no-tasks",4,"ngIf"],["class","task-card active-task",4,"ngFor","ngForOf"],["class","pagination-container",4,"ngIf"],[1,"active-filters"],[1,"filter-label"],["class","filter-tag",4,"ngIf"],[1,"clear-all-filters",3,"click"],[1,"filter-tag"],[1,"remove-filter",3,"click"],[1,"no-tasks"],[1,"fas","fa-tasks"],[1,"create-task-btn",3,"click"],[1,"fas","fa-search"],[1,"clear-filters-btn",3,"click"],[1,"fas","fa-times"],[1,"task-card","active-task"],[1,"task-content"],[1,"task-actions"],["title","Editar",1,"edit-btn",3,"click"],[1,"fas","fa-edit"],["title","Eliminar",1,"delete-btn",3,"click"],[1,"fas","fa-trash"],[1,"task-title"],[1,"task-description"],[1,"task-meta"],["class","task-category",4,"ngIf"],[1,"task-date"],[1,"fas","fa-calendar"],[1,"task-category"],[1,"fas","fa-folder"],[1,"pagination-container"],[1,"pagination-btn",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"pagination-info"],[1,"fas","fa-chevron-right"]],template:function(e,a){e&1&&(t(0,"div",0),d(1,"app-navbar"),t(2,"div",1)(3,"div",2)(4,"button",3),p("click",function(){return a.goBack()}),d(5,"i",4),s(6," Atr\xE1s "),r(),t(7,"button",5),p("click",function(){return a.createNewNote()}),d(8,"i",6),s(9," Nueva Nota "),r()(),t(10,"div",7)(11,"div",8)(12,"input",9),k("ngModelChange",function(m){return b(a.searchTerm,m)||(a.searchTerm=m),m}),p("keyup.enter",function(){return a.onSearch()})("input",function(){return a.onSearchInput()}),r()(),t(13,"div",10)(14,"select",11),k("ngModelChange",function(m){return b(a.sortBy,m)||(a.sortBy=m),m}),p("change",function(){return a.onSortChange()}),t(15,"option",12),s(16,"Sin ordenar"),r(),t(17,"option",13),s(18,"Ordenar por fecha"),r(),t(19,"option",14),s(20,"Ordenar por t\xEDtulo"),r()(),x(21,U,5,1,"select",15),r()()(),x(22,X,4,0,"div",16)(23,se,9,5,"div",17),r(),d(24,"app-floating-chat")(25,"app-footer")),e&2&&(c(12),v("ngModel",a.searchTerm),c(2),v("ngModel",a.sortBy),c(7),g("ngIf",a.sortBy),c(),g("ngIf",a.loading),c(),g("ngIf",!a.loading))},dependencies:[L,S,E,T,Y,R,j,D,z,F,W,A,B,V,q],styles:['.task-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background:#f8f9fa;min-height:100vh;font-family:"Font Awesome 6 Brand",sans-serif;line-height:1}.task-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding:20px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.header-left[_ngcontent-%COMP%]{display:flex;gap:15px}.back-btn[_ngcontent-%COMP%], .new-task-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}.back-btn[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.back-btn[_ngcontent-%COMP%]:hover{background:#5a6268;transform:translateY(-2px)}.new-task-btn[_ngcontent-%COMP%]{background:#7c3aed;color:#fff}.clear-filters-btn[_ngcontent-%COMP%]{grid-area:2px;padding:6px 20px;border:none;background:#7c3aed;color:#fff;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease}.clear-all-filters[_ngcontent-%COMP%]{grid-area:2px;padding:5px 20px;border:none;background:#7c3aed;color:#fff;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease}.new-task-btn[_ngcontent-%COMP%]:hover{background:#6d28d9;transform:translateY(-2px)}.search-container[_ngcontent-%COMP%]{padding-right:7px;position:relative;width:300px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 1px 12px 11px;border:2px solid #e5e7eb;border-radius:25px;font-size:14px;outline:none;transition:border-color .3s ease}.search-input[_ngcontent-%COMP%]:focus{border-color:#7c3aed}.search-icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);color:#9ca3af;cursor:pointer}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#6b7280}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f4f6;border-top:4px solid #7c3aed;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.tasks-section[_ngcontent-%COMP%]{margin-bottom:40px}.section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#9ca3af;letter-spacing:.5px;margin-bottom:20px;text-transform:uppercase}.no-tasks[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#9ca3af;font-style:italic}.task-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin-bottom:16px;transition:all .3s ease;position:relative;overflow:hidden}.task-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #00000026}.active-task[_ngcontent-%COMP%]{border-left:5px solid #7c3aed;box-shadow:0 2px 8px #7c3aed1a}.active-filters[_ngcontent-%COMP%]{display:flex;gap:15px}.remove-filter[_ngcontent-%COMP%]{border:none;background:#28242f;color:#fff;border-radius:8px}.completed-task[_ngcontent-%COMP%]{opacity:.8;background:#f8f9fa}.completed-task.task-card[_ngcontent-%COMP%]:nth-child(2n){background:#fff3cd}.completed-task.task-card[_ngcontent-%COMP%]:nth-child(odd){background:#d1ecf1}.completed-task.task-card[_ngcontent-%COMP%]:nth-child(3n){background:#d4edda}.task-content[_ngcontent-%COMP%]{padding:20px;position:relative}.task-actions[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;display:flex;gap:8px;opacity:0;transition:opacity .3s ease}.task-card[_ngcontent-%COMP%]:hover   .task-actions[_ngcontent-%COMP%]{opacity:1}.task-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;transition:all .3s ease}.edit-btn[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background:#d97706;transform:scale(1.1)}.delete-btn[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover{background:#dc2626;transform:scale(1.1)}.complete-btn[_ngcontent-%COMP%]{background:#10b981;color:#fff}.complete-btn[_ngcontent-%COMP%]:hover{background:#059669;transform:scale(1.1)}.view-btn[_ngcontent-%COMP%]{background:#6366f1;color:#fff}.view-btn[_ngcontent-%COMP%]:hover{background:#4f46e5;transform:scale(1.1)}.completed-indicator[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;color:#10b981;font-size:20px}.task-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1f2937;margin:0 0 8px;padding-right:120px}.completed-task[_ngcontent-%COMP%]   .task-title[_ngcontent-%COMP%]{text-decoration:line-through;color:#6b7280;padding-left:35px}.task-description[_ngcontent-%COMP%]{color:#6b7280;line-height:1.5;margin:0 0 16px;padding-right:60px}.completed-task[_ngcontent-%COMP%]   .task-description[_ngcontent-%COMP%]{padding-left:35px}.task-meta[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;align-items:center}.completed-task[_ngcontent-%COMP%]   .task-meta[_ngcontent-%COMP%]{padding-left:35px}.task-category[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.task-priority[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;text-transform:uppercase}.priority-high[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.priority-medium[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.priority-low[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.task-date[_ngcontent-%COMP%]{color:#9ca3af;font-size:12px}.sort-container[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.sort-select[_ngcontent-%COMP%], .sort-direction-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:6px;background-color:#fff;font-size:14px;color:#333;cursor:pointer;transition:border-color .3s ease}.sort-select[_ngcontent-%COMP%]:focus, .sort-direction-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff1a}.sort-select[_ngcontent-%COMP%]:hover, .sort-direction-select[_ngcontent-%COMP%]:hover{border-color:#007bff}.search-filters[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex-wrap:wrap}@media (max-width: 768px){.search-filters[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.sort-container[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.sort-select[_ngcontent-%COMP%], .sort-direction-select[_ngcontent-%COMP%]{flex:1;min-width:120px}}@media (max-width: 768px){.task-container[_ngcontent-%COMP%]{padding:10px}.task-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.header-left[_ngcontent-%COMP%]{justify-content:center}.search-container[_ngcontent-%COMP%]{padding:4px 22px;width:100%}.task-actions[_ngcontent-%COMP%]{position:static;opacity:1;justify-content:flex-end;margin-bottom:15px}.task-title[_ngcontent-%COMP%], .task-description[_ngcontent-%COMP%]{padding-right:0}.task-meta[_ngcontent-%COMP%]{padding-left:0!important}}']})};export{J as NoteListComponent};
