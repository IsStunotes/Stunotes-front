import{a as J}from"./chunk-KD4IJPWM.js";import{a as B,b as l,c as E,d as _,g as k,j as M,k as S,q as O,s as R}from"./chunk-RI57JWSE.js";import"./chunk-EV5VSRPK.js";import{d as x,f as A,g as P,i as D}from"./chunk-BXLK4DMO.js";import{Da as g,Kb as v,Nb as y,Oa as a,Pa as o,Qa as n,Ra as F,U as d,Ua as C,V as u,Va as h,Wa as c,cb as s,eb as w,kb as b,pa as r,ta as p,za as U}from"./chunk-PS3QJLTI.js";import"./chunk-EQDQRRRY.js";var V=()=>["/auth"];function z(e,i){e&1&&(o(0,"p",6),s(1,"Ingresa tu nueva contrase\xF1a"),n())}function N(e,i){e&1&&(o(0,"p",6),s(1,"El enlace de recuperaci\xF3n no es v\xE1lido o ha expirado."),n())}function L(e,i){if(e&1){let t=C();o(0,"form",7),h("ngSubmit",function(){d(t);let m=c();return u(m.onSubmit())}),o(1,"div",8)(2,"label"),s(3,"Nueva contrase\xF1a"),n(),F(4,"input",9),n(),o(5,"button",10),s(6),n()()}if(e&2){let t=c();a("formGroup",t.form),r(5),a("disabled",t.submitting),r(),w(" ",t.submitting?"Actualizando...":"Actualizar contrase\xF1a"," ")}}var I=class e{constructor(i,t,f,m){this.route=i;this.fb=t;this.authService=f;this.router=m;this.form=this.fb.group({newPassword:["",[l.required,l.minLength(6)]]})}form;token=null;valid=!0;submitting=!1;ngOnInit(){this.token=this.route.snapshot.paramMap.get("token"),this.token&&this.authService.checkToken(this.token).subscribe({next:i=>{i||(this.valid=!1)},error:()=>{this.valid=!1}})}onSubmit(){this.form.valid&&this.token?(this.submitting=!0,this.authService.resetPassword(this.token,this.form.value.newPassword).subscribe({next:()=>{alert("Contrase\xF1a actualizada con \xE9xito."),this.router.navigate(["/auth/login"])},error:()=>{alert("Error al actualizar la contrase\xF1a."),this.submitting=!1}})):this.form.markAllAsTouched()}static \u0275fac=function(t){return new(t||e)(p(x),p(O),p(J),p(A))};static \u0275cmp=U({type:e,selectors:[["app-reset-password"]],decls:9,vars:5,consts:[[1,"auth-container"],[1,"auth-box","animate-slide-up"],[1,"auth-title"],["class","subtitle",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"forgot-link",3,"routerLink"],[1,"subtitle"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","password","formControlName","newPassword"],["type","submit",3,"disabled"]],template:function(t,f){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"StuNotes"),n(),g(4,z,2,0,"p",3)(5,N,2,0,"p",3)(6,L,7,3,"form",4),o(7,"a",5),s(8,"Volver al inicio de sesi\xF3n"),n()()()),t&2&&(r(4),a("ngIf",f.valid),r(),a("ngIf",!f.valid),r(),a("ngIf",f.valid),r(),a("routerLink",b(4,V)))},dependencies:[y,v,R,k,B,E,_,M,S,D,P],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{font-family:Poppins,sans-serif;display:block;background:#fdfdfd}.auth-container[_ngcontent-%COMP%]{background:#faf5ff;min-height:100vh;display:flex;align-items:center;justify-content:center}.auth-box[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:.75rem;box-shadow:0 10px 30px #0000000d;width:100%;max-width:450px;text-align:center;opacity:0;transform:translateY(40px);animation:_ngcontent-%COMP%_slide-up .6s ease forwards}.auth-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#7c3aed;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{margin-bottom:2rem;color:#6b7280}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}label[_ngcontent-%COMP%]{display:block;margin-bottom:.75rem;font-weight:500;color:#374151}input[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;padding:.75rem;border:1px solid #e5e7eb;border-radius:.5rem;font-size:1rem;outline:none;transition:border-color .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#7c3aed;box-shadow:0 0 0 2px #f3e8ff}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#7c3aed;color:#fff;border:none;border-radius:.5rem;font-weight:600;font-size:1rem;margin-top:1rem;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#7e22ce}.forgot-link[_ngcontent-%COMP%]{display:block;margin:1rem 0;color:#6b7280;cursor:pointer;font-size:.875rem}.divider[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb;margin:1.5rem 0}.register-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:transparent;border:2px solid #7c3aed;color:#7c3aed;border-radius:.5rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.register-btn[_ngcontent-%COMP%]:hover{background-color:#f3e8ff}@keyframes _ngcontent-%COMP%_slide-up{to{opacity:1;transform:translateY(0)}}']})};export{I as ResetPasswordComponent};
