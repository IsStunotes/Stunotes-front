import{a as E}from"./chunk-JDU5JYUZ.js";import{a as C,b as m,c as h,d as b,g as v,j as y,k as A,q as w,s as D}from"./chunk-FUNEFGVD.js";import"./chunk-EV5VSRPK.js";import{f as F}from"./chunk-5Q5GY2AE.js";import{Oa as p,Pa as o,Pb as g,Qa as e,Ra as f,Wa as l,eb as n,gb as d,pa as a,ta as s,za as U}from"./chunk-WFUTHYHP.js";import"./chunk-EQDQRRRY.js";var B=class c{constructor(r,t,i){this.fb=r;this.router=t;this.authService=i;this.loginForm=this.fb.group({email:["",[m.required,m.email]],password:["",m.required]})}loginForm;submitting=!1;onSubmit(){if(this.loginForm.valid){let r=this.loginForm.value;this.submitting=!0,this.authService.login(r).subscribe({next:t=>{switch(localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t)),t.role){case"STUDENT":this.router.navigate(["/home"]);break;case"TEACHER":this.router.navigate(["/home"]);break;case"ADMIN":this.router.navigate(["/home"]);break;default:this.router.navigate(["/"])}this.submitting=!1},error:t=>{alert("Credenciales incorrectas o error en el servidor."),this.submitting=!1}})}else this.loginForm.markAllAsTouched()}goToRegister(){this.router.navigate(["/auth/select-role"])}goToForgot(){this.router.navigate(["/recover"])}static \u0275fac=function(t){return new(t||c)(s(w),s(F),s(E))};static \u0275cmp=U({type:c,selectors:[["app-auth"]],decls:22,vars:3,consts:[[1,"auth-container"],[1,"auth-box","animate-slide-up"],[1,"auth-title"],[1,"subtitle"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","email","formControlName","email"],["type","password","formControlName","password"],["type","submit",3,"disabled"],[1,"forgot-link",3,"click"],[1,"divider"],[1,"register-btn",3,"click"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"StuNotes"),e(),o(4,"p",3),n(5,"Conecta con tu comunidad educativa"),e(),o(6,"form",4),l("ngSubmit",function(){return i.onSubmit()}),o(7,"div",5)(8,"label"),n(9,"Correo electr\xF3nico"),e(),f(10,"input",6),e(),o(11,"div",5)(12,"label"),n(13,"Contrase\xF1a"),e(),f(14,"input",7),e(),o(15,"button",8),n(16),e()(),o(17,"a",9),l("click",function(){return i.goToForgot()}),n(18,"\xBFOlvidaste tu contrase\xF1a?"),e(),f(19,"div",10),o(20,"button",11),l("click",function(){return i.goToRegister()}),n(21,"Crear cuenta nueva"),e()()()),t&2&&(a(6),p("formGroup",i.loginForm),a(9),p("disabled",i.submitting),a(),d(" ",i.submitting?"Ingresando...":"Iniciar Sesi\xF3n"," "))},dependencies:[g,D,v,C,h,b,y,A],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{font-family:Poppins,sans-serif;display:block;background:#fdfdfd}.auth-container[_ngcontent-%COMP%]{background:#faf5ff;min-height:100vh;display:flex;align-items:center;justify-content:center}.auth-box[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:.75rem;box-shadow:0 10px 30px #0000000d;width:100%;max-width:450px;text-align:center;opacity:0;transform:translateY(40px);animation:_ngcontent-%COMP%_slide-up .6s ease forwards}.auth-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#7c3aed;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{margin-bottom:2rem;color:#6b7280}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}label[_ngcontent-%COMP%]{display:block;margin-bottom:.75rem;font-weight:500;color:#374151}input[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;padding:.75rem;border:1px solid #e5e7eb;border-radius:.5rem;font-size:1rem;outline:none;transition:border-color .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#7c3aed;box-shadow:0 0 0 2px #f3e8ff}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#7c3aed;color:#fff;border:none;border-radius:.5rem;font-weight:600;font-size:1rem;margin-top:1rem;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#7e22ce}.forgot-link[_ngcontent-%COMP%]{display:block;margin:1rem 0;color:#6b7280;cursor:pointer;font-size:.875rem}.divider[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb;margin:1.5rem 0}.register-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:transparent;border:2px solid #7c3aed;color:#7c3aed;border-radius:.5rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.register-btn[_ngcontent-%COMP%]:hover{background-color:#f3e8ff}@keyframes _ngcontent-%COMP%_slide-up{to{opacity:1;transform:translateY(0)}}']})};export{B as AuthComponent};
