import{a as S}from"./chunk-PC7V7UYZ.js";import{a as x,c as P,d as V,e as k,f as I,g as O,h as N,o as W,p as E,r as R}from"./chunk-FUNEFGVD.js";import"./chunk-EV5VSRPK.js";import{d as v,f as D}from"./chunk-5Q5GY2AE.js";import{Oa as _,Pa as o,Pb as w,Qa as i,U as c,V as m,Va as h,Wa as f,cb as M,eb as a,ib as s,jb as p,kb as g,pa as u,ta as b,za as y}from"./chunk-WFUTHYHP.js";import"./chunk-EQDQRRRY.js";var F=class C{constructor(d,n,e){this.documentService=d;this.router=n;this.route=e}documento={title:"",description:"",version:1,repositoryId:0,userId:0};ngOnInit(){this.route.queryParams.subscribe(d=>{let n=Number(d.repositoryId);n&&(this.documento.repositoryId=n)})}guardarDocumento(){let d=localStorage.getItem("user");if(!d){alert("No hay usuario autenticado. No se puede crear el documento.");return}let n=JSON.parse(d);if(!n.id){alert("El usuario no tiene un ID v\xE1lido.");return}this.documento.userId=n.id,this.documentService.createDocument(this.documento).subscribe({next:()=>{alert("Documento creado correctamente"),history.back()},error:e=>{console.error("Error al crear documento:",e),alert("Ocurri\xF3 un error al crear el documento")}})}cancelar(){history.back()}static \u0275fac=function(n){return new(n||C)(b(S),b(D),b(v))};static \u0275cmp=y({type:C,selectors:[["app-document-create"]],decls:22,vars:5,consts:[["docForm","ngForm"],[1,"form-container"],[1,"form-title"],[3,"ngSubmit"],["type","text","name","title","required","",3,"ngModelChange","ngModel"],["name","description",3,"ngModelChange","ngModel"],["type","number","name","version","required","","min","1",3,"ngModelChange","ngModel"],["type","number","name","repositoryId","required","","min","1",3,"ngModelChange","ngModel"],[1,"buttons"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(n,e){if(n&1){let r=h();o(0,"div",1)(1,"h2",2),a(2,"\u{1F4C4} Crear Nuevo Documento"),i(),o(3,"form",3,0),f("ngSubmit",function(){return c(r),m(e.guardarDocumento())}),o(5,"label"),a(6," T\xEDtulo: "),o(7,"input",4),g("ngModelChange",function(t){return c(r),p(e.documento.title,t)||(e.documento.title=t),m(t)}),i()(),o(8,"label"),a(9," Descripci\xF3n: "),o(10,"textarea",5),g("ngModelChange",function(t){return c(r),p(e.documento.description,t)||(e.documento.description=t),m(t)}),i()(),o(11,"label"),a(12," Versi\xF3n: "),o(13,"input",6),g("ngModelChange",function(t){return c(r),p(e.documento.version,t)||(e.documento.version=t),m(t)}),i()(),o(14,"label"),a(15," ID del Repositorio: "),o(16,"input",7),g("ngModelChange",function(t){return c(r),p(e.documento.repositoryId,t)||(e.documento.repositoryId=t),m(t)}),i()(),o(17,"div",8)(18,"button",9),a(19,"Guardar"),i(),o(20,"button",10),f("click",function(){return c(r),m(e.cancelar())}),a(21,"Cancelar"),i()()()()}if(n&2){let r=M(4);u(7),s("ngModel",e.documento.title),u(3),s("ngModel",e.documento.description),u(3),s("ngModel",e.documento.version),u(3),s("ngModel",e.documento.repositoryId),u(2),_("disabled",r.invalid)}},dependencies:[w,R,O,x,N,P,V,E,W,I,k],styles:['[_nghost-%COMP%]{background:#f0f0f0b3;font-family:Poppins,sans-serif;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1rem}.form-container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;width:100%;margin:2rem auto;border:1px solid #e5e7eb;border-radius:12px;background:#fff;box-shadow:0 10px 25px #0000000d}.form-title[_ngcontent-%COMP%]{text-align:center;font-size:1.8rem;margin-bottom:2rem;font-weight:600;color:#4b5563;position:relative}.form-title[_ngcontent-%COMP%]:after{content:"";display:block;width:60px;height:4px;background:#7c3aed;margin:8px auto 0;border-radius:2px}label[_ngcontent-%COMP%]{display:block;margin-bottom:1.5rem;font-weight:500;color:#374151}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:.6rem .75rem;margin-top:.4rem;border:1px solid #d1d5db;border-radius:6px;font-size:1rem}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-weight:600;font-size:1rem;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease;color:#fff}.btn-primary[_ngcontent-%COMP%]{background-color:#7c3aed}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#654de0}.btn-danger[_ngcontent-%COMP%]{background-color:#ef4444}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#dc2626}']})};export{F as DocumentCreateComponent};
