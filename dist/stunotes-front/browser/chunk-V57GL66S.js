import{a as k}from"./chunk-LIDSFJIZ.js";import{a as V}from"./chunk-J5CVK4QX.js";import{a as N}from"./chunk-AWXY37MH.js";import{a as R}from"./chunk-UGJ6NOTJ.js";import{a as P}from"./chunk-VBS6FHQU.js";import{a as E,c as F,d as W,e as T,f as q,g as j,h as A,l as B,m as L,n as z,o as U,p as G,r as J}from"./chunk-IQH5TXM7.js";import"./chunk-EV5VSRPK.js";import{d as O,f as I}from"./chunk-VFWRGXPW.js";import{Da as h,Ib as D,Lb as x,Oa as C,Pa as r,Qa as i,Ra as y,U as d,Ua as M,V as s,Va as _,ab as S,cb as m,eb as w,gb as g,hb as f,ib as b,pa as c,ta as p,za as v}from"./chunk-FOFVNQTZ.js";import"./chunk-EQDQRRRY.js";function K(l,n){if(l&1&&(r(0,"option",13),m(1),i()),l&2){let t=n.$implicit;C("value",t.id),c(),w(" Repositorio ",t.id," ")}}var H=class l{constructor(n,t,e,a){this.documentService=n;this.router=t;this.route=e;this.repositoryService=a}documento={title:"",description:"",version:1,repositoryId:0,userId:0};listaRepositorios=[];ngOnInit(){this.route.queryParams.subscribe(t=>{let e=Number(t.repositoryId);!isNaN(e)&&e>0&&(this.documento.repositoryId=e)});let n=localStorage.getItem("user");if(n){let t=JSON.parse(n);this.repositoryService.getRepositoriesByUsuarioId(t.id).subscribe({next:e=>{this.listaRepositorios=e},error:e=>{console.error("Error al obtener repositorios del usuario",e)}})}}guardarDocumento(){let n=localStorage.getItem("user");if(!n){alert("No hay usuario autenticado. No se puede crear el documento.");return}try{let t=JSON.parse(n);if(!t?.id)throw new Error;this.documento.userId=t.id,this.documentService.createDocument(this.documento).subscribe({next:()=>{alert("Documento creado correctamente"),history.back()},error:e=>{console.error("Error al crear documento:",e),alert("Ocurri\xF3 un error al crear el documento")}})}catch{alert("Error al obtener datos del usuario")}}cancelar(){history.back()}static \u0275fac=function(t){return new(t||l)(p(R),p(I),p(O),p(k))};static \u0275cmp=v({type:l,selectors:[["app-document-create"]],decls:27,vars:6,consts:[["docForm","ngForm"],[1,"form-container"],[1,"form-wrapper"],[1,"form-title"],[3,"ngSubmit"],["type","text","name","title","required","",3,"ngModelChange","ngModel"],["name","description",3,"ngModelChange","ngModel"],["type","number","name","version","required","","min","1",3,"ngModelChange","ngModel"],["name","repositoryId","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"buttons"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[3,"value"]],template:function(t,e){if(t&1){let a=M();y(0,"app-sidebar"),r(1,"div",1),y(2,"app-navbar"),r(3,"div",2)(4,"h2",3),m(5,"\u{1F4C4} Crear Nuevo Documento"),i(),r(6,"form",4,0),_("ngSubmit",function(){return d(a),s(e.guardarDocumento())}),r(8,"label"),m(9," T\xEDtulo: "),r(10,"input",5),b("ngModelChange",function(o){return d(a),f(e.documento.title,o)||(e.documento.title=o),s(o)}),i()(),r(11,"label"),m(12," Contenido: "),r(13,"textarea",6),b("ngModelChange",function(o){return d(a),f(e.documento.description,o)||(e.documento.description=o),s(o)}),i()(),r(14,"label"),m(15," Versi\xF3n: "),r(16,"input",7),b("ngModelChange",function(o){return d(a),f(e.documento.version,o)||(e.documento.version=o),s(o)}),i()(),r(17,"label"),m(18," Selecciona Repositorio: "),r(19,"select",8),b("ngModelChange",function(o){return d(a),f(e.documento.repositoryId,o)||(e.documento.repositoryId=o),s(o)}),h(20,K,2,2,"option",9),i()(),r(21,"div",10)(22,"button",11),m(23,"Guardar"),i(),r(24,"button",12),_("click",function(){return d(a),s(e.cancelar())}),m(25,"Cancelar"),i()()()(),y(26,"app-footer"),i()}if(t&2){let a=S(7);c(10),g("ngModel",e.documento.title),c(3),g("ngModel",e.documento.description),c(3),g("ngModel",e.documento.version),c(3),g("ngModel",e.documento.repositoryId),c(),C("ngForOf",e.listaRepositorios),c(2),C("disabled",a.invalid)}},dependencies:[x,D,J,j,L,z,E,A,B,F,W,G,U,q,T,N,P,V],styles:['[_nghost-%COMP%]{background:#f0f0f0b3;font-family:Poppins,sans-serif;min-height:100vh;display:flex;align-items:start;justify-content:flex-start;padding:2rem}.form-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.form-wrapper[_ngcontent-%COMP%]{margin:2rem auto;padding:2rem;max-width:600px;width:100%;background:#fff;border-radius:12px;box-shadow:0 10px 25px #0000000d;border:1px solid #e5e7eb}.form-title[_ngcontent-%COMP%]{text-align:center;font-size:1.8rem;margin-bottom:2rem;font-weight:600;color:#4b5563;position:relative}.form-title[_ngcontent-%COMP%]:after{content:"";display:block;width:60px;height:4px;background:#7c3aed;margin:8px auto 0;border-radius:2px}label[_ngcontent-%COMP%]{display:block;margin-bottom:1.5rem;font-weight:500;color:#374151}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:.6rem .75rem;margin-top:.4rem;border:1px solid #d1d5db;border-radius:6px;font-size:1rem}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-weight:600;font-size:1rem;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease;color:#fff}.btn-primary[_ngcontent-%COMP%]{background-color:#7c3aed}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#654de0}.btn-danger[_ngcontent-%COMP%]{background-color:#ef4444}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#dc2626}']})};export{H as DocumentCreateComponent};
