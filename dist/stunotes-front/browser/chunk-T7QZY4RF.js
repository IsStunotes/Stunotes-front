import{a as O,c as k,d as S,e as V,f as J,g as H,p as I,r as N}from"./chunk-FUNEFGVD.js";import{a as C}from"./chunk-EV5VSRPK.js";import{Da as U,Jb as D,K as h,Kb as E,Lb as M,O as F,Oa as c,Pa as o,Pb as B,Qa as i,U as l,V as g,Va as _,Wa as m,Xa as f,Xb as P,eb as a,gb as v,ib as w,jb as b,kb as A,pa as p,ta as x,za as y}from"./chunk-WFUTHYHP.js";var d=class n{constructor(e){this.http=e}apiUrl=`${C.apiUrl}/chat`;sendMessage(e){let t=localStorage.getItem("token"),r=`${e}. Responde en m\xE1ximo 20 palabras.`;return this.http.post(`${C.apiUrl}/chat`,{message:r},{headers:{Authorization:`Bearer ${t}`},responseType:"text"})}static \u0275fac=function(t){return new(t||n)(F(P))};static \u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})};function L(n,e){if(n&1&&(o(0,"div",11),a(1),i()),n&2){let t=e.$implicit;c("ngClass",t.role),p(),v(" ",t.content," ")}}function Z(n,e){n&1&&(o(0,"div",12)(1,"span"),a(2,"."),i(),o(3,"span"),a(4,"."),i(),o(5,"span"),a(6,"."),i()())}function K(n,e){if(n&1){let t=_();o(0,"div",2)(1,"div",3),a(2," Asistente Virtual "),o(3,"button",4),m("click",function(){l(t);let s=f();return g(s.toggleChat())}),a(4,"\u2716"),i()(),o(5,"div",5),U(6,L,2,2,"div",6)(7,Z,7,0,"div",7),i(),o(8,"form",8),m("ngSubmit",function(){l(t);let s=f();return g(s.send())}),o(9,"input",9),A("ngModelChange",function(s){l(t);let u=f();return b(u.input,s)||(u.input=s),g(s)}),i(),o(10,"button",10),a(11,"\u27A4"),i()()()}if(n&2){let t=f();p(6),c("ngForOf",t.messages),p(),c("ngIf",t.loading),p(2),w("ngModel",t.input),c("disabled",t.loading),p(),c("disabled",t.loading||!t.input.trim())}}var z=class n{constructor(e){this.chatService=e}input="";messages=[];isOpen=!1;loading=!1;toggleChat(){this.isOpen=!this.isOpen}send(){let e=this.input.trim();e&&(this.messages.push({role:"user",content:e}),this.input="",this.loading=!0,this.chatService.sendMessage(e).subscribe({next:t=>{this.messages.push({role:"assistant",content:t}),this.loading=!1},error:t=>{this.messages.push({role:"assistant",content:"\u26A0\uFE0F Error al responder."}),console.error(t),this.loading=!1}}))}static \u0275fac=function(t){return new(t||n)(x(d))};static \u0275cmp=y({type:n,selectors:[["app-floating-chat"]],decls:3,vars:1,consts:[[1,"chat-toggle-btn",3,"click"],["class","chat-container",4,"ngIf"],[1,"chat-container"],[1,"chat-header"],[1,"close-btn",3,"click"],[1,"chat-messages"],[3,"ngClass",4,"ngFor","ngForOf"],["class","assistant typing",4,"ngIf"],["autocomplete","off",1,"chat-input",3,"ngSubmit"],["name","message","placeholder","Escribe tu mensaje...","required","",3,"ngModelChange","ngModel","disabled"],["type","submit",3,"disabled"],[3,"ngClass"],[1,"assistant","typing"]],template:function(t,r){t&1&&(o(0,"div",0),m("click",function(){return r.toggleChat()}),a(1," \u{1F4AC} "),i(),U(2,K,12,5,"div",1)),t&2&&(p(2),c("ngIf",r.isOpen))},dependencies:[B,D,E,M,N,H,O,k,S,I,J,V],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v23/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{font-family:Poppins,sans-serif}.chat-toggle-btn[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background:#7e3af2;color:#fff;border-radius:50%;width:56px;height:56px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:24px;box-shadow:0 4px 10px #0003;z-index:999;transition:background .3s}.chat-toggle-btn[_ngcontent-%COMP%]:hover{background:#5b27c1}.chat-container[_ngcontent-%COMP%]{position:fixed;bottom:90px;right:20px;width:320px;background:#fff;border-radius:10px;box-shadow:0 6px 15px #00000040;display:flex;flex-direction:column;overflow:hidden;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.chat-header[_ngcontent-%COMP%]{background:#7e3af2;color:#fff;padding:12px 16px;font-weight:700;display:flex;justify-content:space-between;align-items:center}.close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:18px;cursor:pointer}.chat-messages[_ngcontent-%COMP%]{padding:12px;max-height:300px;overflow-y:auto;font-size:14px;background:#f9f9f9}.chat-messages[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{text-align:right;margin:6px 0;color:#7e3af2}.chat-messages[_ngcontent-%COMP%]   .assistant[_ngcontent-%COMP%]{text-align:left;margin:6px 0;color:#333}.chat-input[_ngcontent-%COMP%]{display:flex;border-top:1px solid #ddd;padding:8px;background:#fff}.chat-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;font-size:14px;padding:8px;outline:none}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#7e3af2;color:#fff;border:none;padding:0 14px;cursor:pointer;font-size:16px;border-radius:4px}.typing[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite;margin-right:2px}.typing[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.typing[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_blink{0%,80%,to{opacity:0}40%{opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}']})};export{z as a};
