import{a as G}from"./chunk-GH7RUM62.js";import{a as O,b as l,c as R,d as I,g as F,j as N,k as z,q as E,s as A}from"./chunk-HZNXWY7S.js";import"./chunk-EV5VSRPK.js";import{d as k,f as y,g as M,i as S}from"./chunk-CTUQ4QRL.js";import{Da as b,Jb as C,Lb as P,Oa as a,Pa as o,Qa as r,Ra as h,U as p,Ua as v,V as f,Va as _,Wa as c,cb as s,eb as x,kb as w,pa as n,ta as d,za as g}from"./chunk-QV3KOCKX.js";import"./chunk-EQDQRRRY.js";var V=()=>["/auth"];function j(t,i){t&1&&(o(0,"p",6),s(1,"Ingresa tu nueva contrase\xF1a"),r())}function D(t,i){t&1&&(o(0,"p",6),s(1,"El enlace de recuperaci\xF3n no es v\xE1lido o ha expirado."),r())}function L(t,i){if(t&1){let e=v();o(0,"form",7),_("ngSubmit",function(){p(e);let u=c();return f(u.onSubmit())}),o(1,"div",8)(2,"label"),s(3,"Nueva contrase\xF1a"),r(),h(4,"input",9),r(),o(5,"button",10),s(6),r()()}if(t&2){let e=c();a("formGroup",e.form),n(5),a("disabled",e.submitting),n(),x(" ",e.submitting?"Actualizando...":"Actualizar contrase\xF1a"," ")}}var T=class t{constructor(i,e,m,u){this.route=i;this.fb=e;this.authService=m;this.router=u;this.form=this.fb.group({newPassword:["",[l.required,l.minLength(6)]]})}form;token=null;valid=!0;submitting=!1;ngOnInit(){this.token=this.route.snapshot.paramMap.get("token"),this.token&&this.authService.checkToken(this.token).subscribe({next:i=>{i||(this.valid=!1)},error:()=>{this.valid=!1}})}onSubmit(){this.form.valid&&this.token?(this.submitting=!0,this.authService.resetPassword(this.token,this.form.value.newPassword).subscribe({next:()=>{alert("Contrase\xF1a actualizada con \xE9xito."),this.router.navigate(["/auth/login"])},error:()=>{alert("Error al actualizar la contrase\xF1a."),this.submitting=!1}})):this.form.markAllAsTouched()}static \u0275fac=function(e){return new(e||t)(d(k),d(E),d(G),d(y))};static \u0275cmp=g({type:t,selectors:[["app-reset-password"]],decls:9,vars:5,consts:[[1,"auth-container"],[1,"auth-box","animate-slide-up"],[1,"auth-title"],["class","subtitle",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"forgot-link",3,"routerLink"],[1,"subtitle"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","password","formControlName","newPassword"],["type","submit",3,"disabled"]],template:function(e,m){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"StuNotes"),r(),b(4,j,2,0,"p",3)(5,D,2,0,"p",3)(6,L,7,3,"form",4),o(7,"a",5),s(8,"Volver al inicio de sesi\xF3n"),r()()()),e&2&&(n(4),a("ngIf",m.valid),n(),a("ngIf",!m.valid),n(),a("ngIf",m.valid),n(),a("routerLink",w(4,V)))},dependencies:[P,C,A,F,O,R,I,N,z,S,M],styles:["[_nghost-%COMP%]{font-family:Poppins,sans-serif;display:block;background:#fdfdfd}.auth-container[_ngcontent-%COMP%]{background:#faf5ff;min-height:100vh;display:flex;align-items:center;justify-content:center}.auth-box[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:.75rem;box-shadow:0 10px 30px #0000000d;width:100%;max-width:450px;text-align:center;opacity:0;transform:translateY(40px);animation:_ngcontent-%COMP%_slide-up .6s ease forwards}.auth-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#7c3aed;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{margin-bottom:2rem;color:#6b7280}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}label[_ngcontent-%COMP%]{display:block;margin-bottom:.75rem;font-weight:500;color:#374151}input[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;padding:.75rem;border:1px solid #e5e7eb;border-radius:.5rem;font-size:1rem;outline:none;transition:border-color .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#7c3aed;box-shadow:0 0 0 2px #f3e8ff}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#7c3aed;color:#fff;border:none;border-radius:.5rem;font-weight:600;font-size:1rem;margin-top:1rem;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#7e22ce}.forgot-link[_ngcontent-%COMP%]{display:block;margin:1rem 0;color:#6b7280;cursor:pointer;font-size:.875rem}.divider[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb;margin:1.5rem 0}.register-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:transparent;border:2px solid #7c3aed;color:#7c3aed;border-radius:.5rem;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.register-btn[_ngcontent-%COMP%]:hover{background-color:#f3e8ff}@keyframes _ngcontent-%COMP%_slide-up{to{opacity:1;transform:translateY(0)}}"]})};export{T as ResetPasswordComponent};
